<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Super Tic-Tac-Toe</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
    <div class="container">
        <!-- Landing Page -->
        <div id="landing-page" class="landing-page">
            <h1>Super Tic-Tac-Toe</h1>
            
            <div class="team-selection glass-card">
                <h2>Choose Your Team</h2>
                <button class="team-btn team-x" onclick="selectTeamAndStart('X')"><i class="fas fa-times"></i>Team X</button>
                <button class="team-btn team-o" onclick="selectTeamAndStart('O')"><i class="far fa-circle"></i>Team O</button>
            </div>

            <div class="ai-option">
                <button class="team-btn ai-btn" onclick="startAIGame()">
                <i class="fas fa-robot"></i>Play Against AI
                </button>
            </div>
            
            <div class="glass-card rules">
                <h2>Game Rules</h2>
                <h3>Game Setup</h3>
                <ul>
                    <li><strong>Boards:</strong> 9 small Tic-Tac-Toe boards arranged in a 3×3 grid.</li>
                    <li><strong>Players:</strong> Two teams (X and O)</li>
                    <li><strong>Timer:</strong> Moves can be made every 30 seconds (for testing, normally 5 minutes).</li>
                    <li><strong>First click:</strong> When the timer expires, the first player to click gets to place their team's mark (X or O).</li>
                </ul>
                
                <h3>How to Play</h3>
                <ul>
                    <li><strong>First Move:</strong> The first player can place their mark anywhere.</li>
                    <li><strong>Move Dictates Next Board:</strong> Your move position determines which board the next player must play on.</li>
                    <li><strong>Unavailable Board:</strong> If a board is already won or full, the next player may play on any board.</li>
                    <li><strong>Taking Turns:</strong> When the timer expires, the first player to click places their team's mark.</li>
                </ul>
                
                <h3>Winning</h3>
                <ul>
                    <li><strong>Local Board:</strong> Win by getting three in a row on any small board.</li>
                    <li><strong>Global Game:</strong> Win by getting three local board wins in a row.</li>
                </ul>
            </div>
        </div>
        
        <!-- Game Page -->
        <div id="game-page" class="game-page">
            <h1>Super Tic-Tac-Toe</h1>
            
            <div class="game-info glass-card">
                <div class="player-info">
                    You are on <span id="player-team">Team X</span>
                </div>
                <div class="timer waiting" id="timer">Next move in: 0:30</div>
                <p id="move-info">When timer expires, first player to click places their team's mark!</p>
            </div>
            
            <div id="winner-display"></div>
            
            <div class="game-board-container">
                <div class="global-board" id="global-board">
                    <!-- Local boards will be generated by JavaScript -->
                </div>
            </div>
            
            <div class="controls">
                <button class="btn back-btn" id="back-button" onclick="goBackToLanding()"><i class="fas fa-user-edit"></i>Change Team</button>
                <button class="btn reset-btn" id="reset-button" onclick="resetGame()"><i class="fas fa-redo"></i>Reset Game</button>
                <button class="btn full-reset-btn" id="full-reset-button" onclick="fullReset()"><i class="fas fa-power-off"></i>Full Reset</button>
            </div>
        </div>
    </div>

   <!-- Floating Chat Button & Popup Chat Window -->
<div id="chatPopup" class="chat-popup">
    <div class="chat-header">
      <span class="chat-title">Chat – Team <span id="chatUsername"></span></span>
      <button class="chat-close" onclick="toggleChat()">×</button>
    </div>
    <div class="chat-messages" id="chatMessages">
      <!-- Chat messages will appear here -->
    </div>
    <div class="chat-footer">
      <input type="text" id="chatInput" placeholder="Type your message..." />
      <button id="chatSendBtn" onclick="sendChatMessage()">Send</button>
    </div>
  </div>
  <button id="chatToggleBtn" class="chat-toggle-btn" onclick="toggleChat()">Chat</button>
  
</body>
</html>
