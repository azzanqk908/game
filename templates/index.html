<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Super Tic-Tac-Toe</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <div class="container">
        <!-- Landing Page -->
        <div id="landing-page" class="landing-page">
            <h1>Super Tic-Tac-Toe</h1>
            <div class="team-selection glass-card">
                <h2>Choose Your Team</h2>
                <button class="team-btn team-x" onclick="selectTeamAndStart('X')">
                  <i class="fas fa-times"></i>Team X
                </button>
                <button class="team-btn team-o" onclick="selectTeamAndStart('O')">
                  <i class="far fa-circle"></i>Team O
                </button>
            </div>
            <div class="ai-option">
                <button class="team-btn ai-btn" onclick="startAIGame()">
                  <i class="fas fa-robot"></i>Play Against AI
                </button>
            </div>
            <div class="glass-card rules">
                <h2>Game Rules</h2>
                <!-- Rules content here -->
            </div>
        </div>
        
        <!-- Game Page -->
        <div id="game-page" class="game-page">
            <h1>Super Tic-Tac-Toe</h1>
            <div class="game-info glass-card">
                <div class="player-info">
                    You are on <span id="player-team">Team X</span>
                </div>
                <div class="timer waiting" id="timer">Next move in: 0:30</div>
                <p id="move-info">
                    When timer expires, first player to click places their team's mark!
                </p>
            </div>
            <div id="winner-display"></div>
            <div class="game-board-container">
                <div class="global-board" id="global-board">
                    <!-- Local boards will be generated by JavaScript -->
                </div>
            </div>
            <div class="controls">
                <button class="btn back-btn" id="back-button" onclick="goBackToLanding()">
                    <i class="fas fa-user-edit"></i>Change Team
                </button>
                <button class="btn reset-btn" id="reset-button" onclick="resetGame()">
                    <i class="fas fa-redo"></i>Reset Game
                </button>
                <button class="btn full-reset-btn" id="full-reset-button" onclick="fullReset()">
                    <i class="fas fa-power-off"></i>Full Reset
                </button>
            </div>
        </div>
    </div>

    <!-- Floating Chat Button & Popup Chat Window -->
    <div id="chatPopup" class="chat-popup">
        <div class="chat-header">
          <span class="chat-title">Chat – Team <span id="chatUsername"></span></span>
          <button class="chat-close" onclick="toggleChat()">×</button>
        </div>
        <div class="chat-messages" id="chatMessages">
          <!-- Chat messages will appear here -->
        </div>
        <div class="chat-footer">
          <input type="text" id="chatInput" placeholder="Type your message..." />
          <button id="chatSendBtn" onclick="sendChatMessage()">Send</button>
        </div>
    </div>
    <button id="chatToggleBtn" class="chat-toggle-btn" onclick="toggleChat()">Chat</button>
    
    <!-- Include script.js only once -->
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
